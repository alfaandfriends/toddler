import{_ as V}from"./AuthenticatedLayout-Rf1fhl34.js";import{o as d,f as m,b as n,r as g,a as e,u as s,w as t,F as y,Z as x,d as i,c as $,g as S,l as b,t as c}from"./app-CFghue2P.js";import{_,a as H,b as B,c as v,d as f,e as D,f as p,h as M}from"./moment-CsYyfTOR.js";import{g as k}from"./DeleteConfirmation-BXQli-y0.js";import"./ApplicationLogo-BezQuP7C.js";import"./CardContent-CV2i1EVU.js";function N(l,o){return d(),m("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.84998 7.49998C1.84998 4.66458 4.05979 1.84998 7.49998 1.84998C10.2783 1.84998 11.6515 3.9064 12.2367 5H10.5C10.2239 5 10 5.22386 10 5.5C10 5.77614 10.2239 6 10.5 6H13.5C13.7761 6 14 5.77614 14 5.5V2.5C14 2.22386 13.7761 2 13.5 2C13.2239 2 13 2.22386 13 2.5V4.31318C12.2955 3.07126 10.6659 0.849976 7.49998 0.849976C3.43716 0.849976 0.849976 4.18537 0.849976 7.49998C0.849976 10.8146 3.43716 14.15 7.49998 14.15C9.44382 14.15 11.0622 13.3808 12.2145 12.2084C12.8315 11.5806 13.3133 10.839 13.6418 10.0407C13.7469 9.78536 13.6251 9.49315 13.3698 9.38806C13.1144 9.28296 12.8222 9.40478 12.7171 9.66014C12.4363 10.3425 12.0251 10.9745 11.5013 11.5074C10.5295 12.4963 9.16504 13.15 7.49998 13.15C4.05979 13.15 1.84998 10.3354 1.84998 7.49998Z",fill:"currentColor"})])}function L(l,o){return d(),m("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.85355 2.14645C5.04882 2.34171 5.04882 2.65829 4.85355 2.85355L3.70711 4H9C11.4853 4 13.5 6.01472 13.5 8.5C13.5 10.9853 11.4853 13 9 13H5C4.72386 13 4.5 12.7761 4.5 12.5C4.5 12.2239 4.72386 12 5 12H9C10.933 12 12.5 10.433 12.5 8.5C12.5 6.567 10.933 5 9 5H3.70711L4.85355 6.14645C5.04882 6.34171 5.04882 6.65829 4.85355 6.85355C4.65829 7.04882 4.34171 7.04882 4.14645 6.85355L2.14645 4.85355C1.95118 4.65829 1.95118 4.34171 2.14645 4.14645L4.14645 2.14645C4.34171 1.95118 4.65829 1.95118 4.85355 2.14645Z",fill:"currentColor"})])}function A(l,o){return d(),m("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z",fill:"currentColor"})])}const K=n("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Manage Schools",-1),R={class:"py-6"},Z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-2"},E={class:"grid grid-cols-1 2xl:grid-cols-3 gap-4"},P={class:""},Y={class:""},j={class:""},F=n("div",{class:"grid grid-cols-1 2xl:grid-cols-3 gap-4 mb-1"},null,-1),I=n("div",{class:"p-3"}," No Record Found ",-1),T={class:"flex justify-between"},U={class:"flex space-x-2"},O=n("span",null,"Reset Password",-1),q=n("span",null,"Delete School",-1),z={class:"flex justify-end"},G=n("span",null,"Back",-1),J={components:{DeleteConfirmation:k},data(){var l,o;return{params:{search:((l=this.$page.props.filters)==null?void 0:l.search)||"",category_id:((o=this.$page.props.filters)==null?void 0:o.category_id)||""},confirmation:{is_open:!1,id:"",route_name:"",method:"",title:"",description:""}}},methods:{search(){this.$inertia.get(this.route("schools"),this.params,{replace:!0,preserveState:!0})},deleteKey(l){this.confirmation.route_name="keys.destroy",this.confirmation.method="delete",this.confirmation.id=l,this.confirmation.is_open=!0,this.confirmation.title="Delete Keys",this.confirmation.description="Are you sure? This will remove both active keys for this kit."},ResetKeySwapCount(l){this.confirmation.route_name="keys.reset",this.confirmation.method="post",this.confirmation.id=l,this.confirmation.is_open=!0,this.confirmation.title="Reset Swap Count",this.confirmation.description="Are you sure want to reset the swap count?"},deleteSchool(){this.confirmation.route_name="schools.destroy",this.confirmation.method="delete",this.confirmation.id=this.$page.props.info.id,this.confirmation.is_open=!0,this.confirmation.title="Delete School",this.confirmation.description="Are you sure want to delete this school? All information will be deleted and this action is irreversible."},resetPassword(){this.confirmation.route_name="schools.reset_password",this.confirmation.method="post",this.confirmation.id=this.$page.props.info.id,this.confirmation.is_open=!0,this.confirmation.title="Reset Password",this.confirmation.description="Are you sure want to reset password? New password will be sent to school's email."}}},ie=Object.assign(J,{__name:"Edit",setup(l){return(o,r)=>{const w=g("Label"),C=g("Input"),u=g("Button");return d(),m(y,null,[e(s(x),{title:"Manage Schools"}),e(V,null,{header:t(()=>[K]),default:t(()=>[n("div",R,[n("div",Z,[e(_,null,{title:t(()=>[i("School Information")]),content:t(()=>[n("div",E,[n("div",P,[e(w,null,{default:t(()=>[i("School Name")]),_:1}),e(C,{disabled:"",modelValue:o.$page.props.info.name,"onUpdate:modelValue":r[0]||(r[0]=a=>o.$page.props.info.name=a)},null,8,["modelValue"])]),n("div",Y,[e(w,null,{default:t(()=>[i("School Code")]),_:1}),e(C,{disabled:"",modelValue:o.$page.props.info.code,"onUpdate:modelValue":r[1]||(r[1]=a=>o.$page.props.info.code=a)},null,8,["modelValue"])]),n("div",j,[e(w,null,{default:t(()=>[i("School Email")]),_:1}),e(C,{disabled:"",modelValue:o.$page.props.info.email,"onUpdate:modelValue":r[2]||(r[2]=a=>o.$page.props.info.email=a)},null,8,["modelValue"])])])]),_:1}),e(_,null,{title:t(()=>[i("Toddler App Keys")]),content:t(()=>[F,e(s(H),null,{default:t(()=>[e(s(B),{class:"bg-gray-100"},{default:t(()=>[e(s(v),null,{default:t(()=>[e(s(f),{class:"whitespace-nowrap pl-10"},{default:t(()=>[i("Device Name")]),_:1}),e(s(f),{class:"whitespace-nowrap"},{default:t(()=>[i("Kit")]),_:1}),e(s(f),{class:"whitespace-nowrap"},{default:t(()=>[i("Expiry Date")]),_:1}),e(s(f),{class:"whitespace-nowrap text-center"},{default:t(()=>[i("Swap Count")]),_:1}),e(s(f),{class:"whitespace-nowrap text-center"},{default:t(()=>[i("Action")]),_:1})]),_:1})]),_:1}),e(s(D),null,{default:t(()=>[o.$page.props.keys.data.length?S("",!0):(d(),$(s(v),{key:0},{default:t(()=>[e(s(p),{class:"text-center",colspan:"10"},{default:t(()=>[I]),_:1})]),_:1})),(d(!0),m(y,null,b(o.$page.props.keys.data,(a,Q)=>(d(),$(s(v),null,{default:t(()=>[e(s(p),{class:"whitespace-nowrap pl-10"},{default:t(()=>[i(c(a.device_name),1)]),_:2},1024),e(s(p),{class:"whitespace-nowrap"},{default:t(()=>{var h;return[i(c((h=a.kit_ref)==null?void 0:h.name),1)]}),_:2},1024),e(s(p),{class:"whitespace-nowrap"},{default:t(()=>[i(c(s(M)(a.expiry_date).format("DD MMM YYYY")),1)]),_:2},1024),e(s(p),{class:"whitespace-nowrap text-center"},{default:t(()=>[i(c(a.swap_count),1)]),_:2},1024),e(s(p),{class:"whitespace-nowrap text-center space-x-2"},{default:t(()=>[e(u,{variant:"outline",onClick:h=>o.ResetKeySwapCount(a.id)},{default:t(()=>[i("Reset Swap Count")]),_:2},1032,["onClick"]),e(u,{variant:"destructive",onClick:h=>o.deleteKey(a.id)},{default:t(()=>[i("Delete")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}),e(_,null,{content:t(()=>[n("div",T,[n("div",U,[e(u,{variant:"outline",class:"space-x-2",onClick:o.resetPassword},{default:t(()=>[e(s(N),{class:"h-4 w-4"}),O]),_:1},8,["onClick"]),e(u,{variant:"destructive",onClick:o.deleteSchool},{default:t(()=>[e(s(A),{class:"h-4 w-4"}),q]),_:1},8,["onClick"])])])]),_:1}),e(_,null,{content:t(()=>[n("div",z,[e(u,{variant:"outline",class:"space-x-1",onClick:r[3]||(r[3]=a=>o.$inertia.get(o.route("schools")))},{default:t(()=>[e(s(L),{class:"h-4 w-4"}),G]),_:1})])]),_:1})])])]),_:1}),e(k,{open:o.confirmation.is_open,onClose:r[4]||(r[4]=a=>o.confirmation.is_open=!1),routeName:o.confirmation.route_name,id:o.confirmation.id,method:o.confirmation.method},{title:t(()=>[i(c(o.confirmation.title),1)]),description:t(()=>[i(c(o.confirmation.description),1)]),_:1},8,["open","routeName","id","method"])],64)}}});export{ie as default};
