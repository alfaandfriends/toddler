import{_ as D}from"./AuthenticatedLayout-DE_Czqam.js";import{r as x,o as u,f as g,a as n,u as o,w as a,F as b,k as C,Z as U,b as h,d as r,c as y,g as w,l as N,t as l}from"./app-dLogCJIG.js";import{_ as V,a as B,b as E,c as k,d as m,e as R,f as d,h as T}from"./moment-C4SSr9x7.js";import{P as L}from"./Pagination-BhPpnGNJ.js";import{_ as I}from"./DeleteConfirmation-qK65i736.js";import"./ApplicationLogo-B04-tI9j.js";import"./CardContent-BTp16PuO.js";var s=[];for(var v=0;v<256;++v)s.push((v+256).toString(16).slice(1));function A(t,e=0){return(s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]).toLowerCase()}var _,H=new Uint8Array(16);function Y(){if(!_&&(_=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _(H)}var F=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const $={randomUUID:F};function M(t,e,i){if($.randomUUID&&!e&&!t)return $.randomUUID();t=t||{};var c=t.random||(t.rng||Y)();return c[6]=c[6]&15|64,c[8]=c[8]&63|128,A(c)}const P=h("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Dashboard",-1),j={class:"py-6"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-2"},O=h("div",{class:"p-3"}," No Record Found ",-1),q={key:1,class:"text-red-500 py-2"},Z={components:{DeleteConfirmation:I},data(){return{confirmation:{is_open:!1,use_inertia:!1,id:"",route_name:"",method:"",params:"",title:"",description:""}}},methods:{checkStatus(t){var e=localStorage.getItem("app-key"),e=localStorage.getItem("app-token");localStorage.setItem("app-key",t),e||(e=M(),localStorage.setItem("app-token",e)),C.post(route("launch.check_status",t),{platform:this.$device.os_name,browser:this.$device.browser_name,app_token:e}).then(i=>{i.data==100&&(this.confirmation.route_name="launch.check_status",this.confirmation.method="post",this.confirmation.id=t,this.confirmation.is_open=!0,this.confirmation.params={proceed:!0},this.confirmation.title="Last Device Swap",this.confirmation.description="This is your last device swap, if you need too reset the device limit please contact support."),i.data==200&&this.launch()})},launch(){const t=route("launch"),e=document.createElement("form");e.action=t,e.method="POST",e.target="_blank";const i=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),c=document.createElement("input");c.type="hidden",c.name="_token",c.value=i,e.appendChild(c),e.appendChild(this.createHiddenInput("app_key",localStorage.getItem("app-key"))),e.appendChild(this.createHiddenInput("app_token",localStorage.getItem("app-token"))),document.body.appendChild(e),e.submit(),document.body.removeChild(e)},createHiddenInput(t,e){const i=document.createElement("input");return i.type="hidden",i.name=t,i.value=e,i}}},te=Object.assign(Z,{__name:"Dashboard",setup(t){return(e,i)=>{const c=x("Button");return u(),g(b,null,[n(o(U),{title:"Dashboard"}),n(D,null,{header:a(()=>[P]),default:a(()=>[h("div",j,[h("div",K,[n(V,null,{title:a(()=>[r("Toddler App Keys")]),content:a(()=>[n(o(B),null,{default:a(()=>[n(o(E),{class:"bg-gray-100"},{default:a(()=>[n(o(k),null,{default:a(()=>[n(o(m),null,{default:a(()=>[r("#")]),_:1}),n(o(m),{class:"whitespace-nowrap"},{default:a(()=>[r("Device Name")]),_:1}),n(o(m),{class:"whitespace-nowrap"},{default:a(()=>[r("Kit")]),_:1}),n(o(m),{class:"whitespace-nowrap text-center"},{default:a(()=>[r("Swap Count")]),_:1}),n(o(m),{class:"whitespace-nowrap text-center"},{default:a(()=>[r("Expiry Date")]),_:1}),n(o(m),{class:"whitespace-nowrap text-center"},{default:a(()=>[r("Action")]),_:1})]),_:1})]),_:1}),n(o(R),null,{default:a(()=>[e.$page.props.keys.data.length?w("",!0):(u(),y(o(k),{key:0},{default:a(()=>[n(o(d),{class:"text-center",colspan:"10"},{default:a(()=>[O]),_:1})]),_:1})),(u(!0),g(b,null,N(e.$page.props.keys.data,(p,S)=>(u(),y(o(k),null,{default:a(()=>[n(o(d),null,{default:a(()=>[r(l(e.$page.props.keys.from+S),1)]),_:2},1024),n(o(d),{class:"whitespace-nowrap"},{default:a(()=>[r(l(p.device_name),1)]),_:2},1024),n(o(d),{class:"whitespace-nowrap"},{default:a(()=>{var f;return[r(l((f=p.kit_ref)==null?void 0:f.name),1)]}),_:2},1024),n(o(d),{class:"whitespace-nowrap text-center"},{default:a(()=>[r(l(p.swap_count),1)]),_:2},1024),n(o(d),{class:"whitespace-nowrap text-center"},{default:a(()=>[r(l(o(T)(p.expiry_date).format("DD MMM YYYY")),1)]),_:2},1024),n(o(d),{class:"whitespace-nowrap text-center"},{default:a(()=>[p.swap_count!=3?(u(),y(c,{key:0,onClick:f=>e.checkStatus(p.key)},{default:a(()=>[r("Launch")]),_:2},1032,["onClick"])):w("",!0),p.swap_count==3?(u(),g("div",q,"Device Limit Reached")):w("",!0)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}),n(L,{page_data:e.$page.props.keys},null,8,["page_data"])])])]),_:1}),n(I,{useInertia:e.confirmation.use_inertia,onSuccess:i[0]||(i[0]=p=>e.launch()),open:e.confirmation.is_open,onClose:i[1]||(i[1]=p=>e.confirmation.is_open=!1),routeName:e.confirmation.route_name,id:e.confirmation.id,method:e.confirmation.method,params:e.confirmation.params},{title:a(()=>[r(l(e.confirmation.title),1)]),description:a(()=>[r(l(e.confirmation.description),1)]),_:1},8,["useInertia","open","routeName","id","method","params"])],64)}}});export{te as default};
